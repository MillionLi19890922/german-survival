<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="å¾·è¯­ç”Ÿå­˜">
    <meta name="theme-color" content="#007AFF" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1C1C1E" media="(prefers-color-scheme: dark)">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <title>å¾·è¯­ç”Ÿå­˜æ‰‹å†Œ</title>
    <style>
        :root {
            --bg-primary: #F5F5F7;
            --bg-secondary: #FFFFFF;
            --bg-tertiary: #E5E5EA;
            --text-primary: #1C1C1E;
            --text-secondary: #8E8E93;
            --accent: #007AFF;
            --accent-light: rgba(0, 122, 255, 0.1);
            --border: rgba(0, 0, 0, 0.1);
            --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1C1C1E;
                --bg-secondary: #2C2C2E;
                --bg-tertiary: #3A3A3C;
                --text-primary: #FFFFFF;
                --text-secondary: #8E8E93;
                --accent: #0A84FF;
                --accent-light: rgba(10, 132, 255, 0.15);
                --border: rgba(255, 255, 255, 0.1);
                --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* App Container */
        .app {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            background: var(--bg-secondary);
            padding: calc(var(--safe-top) + 12px) 16px 12px;
            border-bottom: 1px solid var(--border);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .header-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: var(--bg-tertiary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
        }

        .back-btn {
            opacity: 0;
            pointer-events: none;
        }

        .back-btn.visible {
            opacity: 1;
            pointer-events: auto;
        }

        /* Main Content */
        .content {
            flex: 1;
            padding: 16px;
            padding-bottom: calc(80px + var(--safe-bottom));
            overflow-y: auto;
        }

        /* Tab Bar */
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 8px 0 calc(8px + var(--safe-bottom));
            display: flex;
            justify-content: space-around;
            z-index: 100;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 16px;
            border: none;
            background: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 10px;
            transition: color 0.2s;
        }

        .tab-item.active {
            color: var(--accent);
        }

        .tab-item .icon {
            font-size: 24px;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Category Grid */
        .category-section {
            margin-bottom: 24px;
        }

        .category-section h2 {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            padding-left: 4px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .category-item {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 16px 8px;
            text-align: center;
            cursor: pointer;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            color: var(--text-primary);
        }

        .category-item:active {
            transform: scale(0.95);
        }

        .category-item .emoji {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .category-item .name {
            font-size: 12px;
            font-weight: 500;
            line-height: 1.3;
        }

        /* Phrase Cards */
        .phrase-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .phrase-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 16px;
            box-shadow: var(--card-shadow);
            position: relative;
        }

        .phrase-card .german {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            line-height: 1.4;
            padding-right: 40px;
        }

        .phrase-card .chinese {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .phrase-card .favorite-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            border: none;
            background: var(--bg-tertiary);
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .phrase-card .favorite-btn.favorited {
            background: var(--accent-light);
        }

        /* AI Search */
        .ai-section {
            margin-bottom: 24px;
        }

        .search-box {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 16px;
            box-shadow: var(--card-shadow);
        }

        .search-box h3 {
            font-size: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-input-wrapper {
            display: flex;
            gap: 8px;
        }

        .search-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--accent);
        }

        .search-btn {
            padding: 12px 20px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .search-btn:disabled {
            opacity: 0.5;
        }

        .ai-result {
            margin-top: 16px;
            padding: 16px;
            background: var(--accent-light);
            border-radius: 12px;
            display: none;
        }

        .ai-result.visible {
            display: block;
        }

        .ai-result .german {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .ai-result .chinese {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .ai-result .note {
            font-size: 12px;
            color: var(--text-secondary);
            font-style: italic;
        }

        .ai-result-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .ai-result-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            cursor: pointer;
        }

        .ai-result-btn.save {
            background: var(--accent);
            color: white;
        }

        .ai-result-btn.copy {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .ai-loading {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 16px;
            color: var(--text-secondary);
        }

        .ai-loading.visible {
            display: flex;
        }

        .ai-loading .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        /* Settings */
        .settings-section {
            background: var(--bg-secondary);
            border-radius: 16px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .settings-item {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-item label {
            font-size: 16px;
        }

        .settings-item input[type="password"],
        .settings-item input[type="text"] {
            flex: 1;
            margin-left: 16px;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
        }

        .settings-item button {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
        }

        .settings-item .save-btn {
            background: var(--accent);
            color: white;
            margin-left: 8px;
        }

        .settings-item .danger-btn {
            background: #FF3B30;
            color: white;
        }

        .settings-note {
            padding: 12px 16px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--text-primary);
            color: var(--bg-primary);
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.visible {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Scene Header */
        .scene-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .scene-header .emoji {
            font-size: 48px;
            margin-bottom: 8px;
        }

        .scene-header h2 {
            font-size: 20px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <button class="header-btn back-btn" id="backBtn" onclick="goBack()">â†</button>
            <h1 id="headerTitle">å¾·è¯­ç”Ÿå­˜æ‰‹å†Œ</h1>
            <button class="header-btn" onclick="showPage('settings')">âš™ï¸</button>
        </header>

        <!-- Main Content -->
        <main class="content">
            <!-- Home Page -->
            <div class="page active" id="page-home">
                <!-- AI Search Section -->
                <div class="ai-section">
                    <div class="search-box">
                        <h3>ğŸ¤– é—® AI</h3>
                        <div class="search-input-wrapper">
                            <input type="text" class="search-input" id="aiInput" placeholder="è¾“å…¥ä½ æƒ³è¯´çš„ä¸­æ–‡...">
                            <button class="search-btn" id="aiSearchBtn" onclick="askAI()">æŸ¥è¯¢</button>
                        </div>
                        <div class="ai-loading" id="aiLoading">
                            <div class="spinner"></div>
                            <span>æ€è€ƒä¸­...</span>
                        </div>
                        <div class="ai-result" id="aiResult">
                            <div class="german" id="aiResultGerman"></div>
                            <div class="chinese" id="aiResultChinese"></div>
                            <div class="note" id="aiResultNote"></div>
                            <div class="ai-result-actions">
                                <button class="ai-result-btn save" onclick="saveAIResult()">â­ æ”¶è—</button>
                                <button class="ai-result-btn copy" onclick="copyAIResult()">ğŸ“‹ å¤åˆ¶</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Categories -->
                <div id="categoriesContainer"></div>
            </div>

            <!-- Scene Page -->
            <div class="page" id="page-scene">
                <div class="scene-header" id="sceneHeader">
                    <div class="emoji"></div>
                    <h2></h2>
                </div>
                <div class="phrase-list" id="phraseList"></div>
            </div>

            <!-- Favorites Page -->
            <div class="page" id="page-favorites">
                <div class="empty-state" id="emptyFavorites">
                    <div class="icon">â­</div>
                    <h3>æš‚æ— æ”¶è—</h3>
                    <p>ç‚¹å‡»çŸ­å¥å¡ç‰‡ä¸Šçš„æ˜Ÿæ˜Ÿæ¥æ”¶è—</p>
                </div>
                <div class="phrase-list" id="favoritesList"></div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="page-settings">
                <div class="settings-section">
                    <div class="settings-item">
                        <label>API Key</label>
                        <input type="password" id="apiKeyInput" placeholder="è¾“å…¥ Gemini API Key">
                        <button class="save-btn" onclick="saveApiKey()">ä¿å­˜</button>
                    </div>
                </div>
                <div class="settings-note">
                    AI æŸ¥è¯¢åŠŸèƒ½éœ€è¦ Gemini API Keyã€‚<br>
                    è¯·è®¿é—® <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a> è·å–ã€‚
                </div>

                <div class="settings-section">
                    <div class="settings-item">
                        <label>æ¸…é™¤æ‰€æœ‰æ”¶è—</label>
                        <button class="danger-btn" onclick="clearFavorites()">æ¸…é™¤</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Tab Bar -->
        <nav class="tab-bar">
            <button class="tab-item active" onclick="showPage('home')" data-page="home">
                <span class="icon">ğŸ </span>
                <span>åœºæ™¯</span>
            </button>
            <button class="tab-item" onclick="showPage('favorites')" data-page="favorites">
                <span class="icon">â­</span>
                <span>æ”¶è—</span>
            </button>
        </nav>

        <!-- Toast -->
        <div class="toast" id="toast"></div>
    </div>

    <script>
        // ========== Data ==========
        const categories = {
            "é¤é¥®ç±»": [
                { id: "restaurant", emoji: "ğŸ½ï¸", name: "é¤å…ç‚¹é¤" },
                { id: "cafe", emoji: "â˜•", name: "å’–å•¡å…" },
                { id: "fastfood", emoji: "ğŸ”", name: "å¿«é¤å¤–å–" },
                { id: "bar", emoji: "ğŸº", name: "é…’å§å¤œåº—" },
                { id: "bakery", emoji: "ğŸ¥", name: "é¢åŒ…åº—" }
            ],
            "å‡ºè¡Œç±»": [
                { id: "transport", emoji: "ğŸš‡", name: "å…¬å…±äº¤é€š" },
                { id: "train", emoji: "ğŸš„", name: "ç«è½¦é•¿é€”" },
                { id: "taxi", emoji: "ğŸš•", name: "æ‰“è½¦ç§Ÿè½¦" },
                { id: "directions", emoji: "ğŸ—ºï¸", name: "é—®è·¯æŒ‡è·¯" },
                { id: "airport", emoji: "âœˆï¸", name: "æœºåœºç™»æœº" },
                { id: "car", emoji: "â›½", name: "åŠ æ²¹ä¿®è½¦" }
            ],
            "è´­ç‰©ç±»": [
                { id: "supermarket", emoji: "ğŸ›’", name: "è¶…å¸‚è´­ç‰©" },
                { id: "clothing", emoji: "ğŸ‘—", name: "æœè£…åº—" },
                { id: "electronics", emoji: "ğŸ“±", name: "ç”µå™¨åº—" },
                { id: "returns", emoji: "ğŸ“¦", name: "ç½‘è´­é€€è´§" }
            ],
            "ç¤¾äº¤ç±»": [
                { id: "greeting", emoji: "ğŸ‘‹", name: "æ—¥å¸¸é—®å€™" },
                { id: "intro", emoji: "ğŸ™‹", name: "è‡ªæˆ‘ä»‹ç»" },
                { id: "neighbor", emoji: "ğŸ˜ï¸", name: "é‚»å±…äº¤æµ" },
                { id: "thanks", emoji: "ğŸ™", name: "é“æ­‰æ„Ÿè°¢" },
                { id: "weather", emoji: "ğŸŒ¤ï¸", name: "å¤©æ°”é—²èŠ" }
            ],
            "åŒ»ç–—ç±»": [
                { id: "doctor", emoji: "ğŸ¥", name: "çœ‹ç—…å°±åŒ»" },
                { id: "pharmacy", emoji: "ğŸ’Š", name: "è¯åº—ä¹°è¯" },
                { id: "dentist", emoji: "ğŸ¦·", name: "ç‰™åŒ»çœ¼ç§‘" }
            ],
            "ç”Ÿæ´»ç±»": [
                { id: "housing", emoji: "ğŸ ", name: "ç§Ÿæˆ¿æ‰¾æˆ¿" },
                { id: "repair", emoji: "ğŸ”§", name: "æŠ¥ä¿®ç»´æŠ¤" },
                { id: "post", emoji: "ğŸ“®", name: "é‚®å±€å¿«é€’" },
                { id: "bank", emoji: "ğŸ¦", name: "é“¶è¡Œä¸šåŠ¡" },
                { id: "haircut", emoji: "ğŸ’‡", name: "ç†å‘ç¾å®¹" },
                { id: "gym", emoji: "ğŸ‹ï¸", name: "å¥èº«æˆ¿" },
                { id: "laundry", emoji: "ğŸ§º", name: "æ´—è¡£åº—" }
            ],
            "åŠäº‹ç±»": [
                { id: "cityhall", emoji: "ğŸ›ï¸", name: "å¸‚æ”¿å…" },
                { id: "telecom", emoji: "ğŸ“¶", name: "ç”µä¿¡è¿è¥å•†" }
            ],
            "å·¥ä½œç±»": [
                { id: "office", emoji: "ğŸ’¼", name: "èŒåœºæ²Ÿé€š" },
                { id: "leave", emoji: "ğŸ–ï¸", name: "è¯·å‡ä¼‘å‡" },
                { id: "interview", emoji: "ğŸ¤", name: "é¢è¯•æ±‚èŒ" }
            ],
            "ç´§æ€¥ç±»": [
                { id: "emergency", emoji: "ğŸ†˜", name: "æŠ¥è­¦æ±‚åŠ©" },
                { id: "complaint", emoji: "ğŸ“¢", name: "æŠ•è¯‰ç»´æƒ" }
            ]
        };

        const phrases = {
            restaurant: [
                { de: "Ich hÃ¤tte gerne...", zh: "æˆ‘æƒ³è¦..." },
                { de: "Die Speisekarte, bitte.", zh: "è¯·ç»™æˆ‘èœå•ã€‚" },
                { de: "Was empfehlen Sie?", zh: "æ‚¨æ¨èä»€ä¹ˆï¼Ÿ" },
                { de: "Ich bin allergisch gegen...", zh: "æˆ‘å¯¹...è¿‡æ•" },
                { de: "Ohne ... bitte.", zh: "è¯·ä¸è¦æ”¾..." },
                { de: "Die Rechnung, bitte.", zh: "è¯·ç»“è´¦ã€‚" },
                { de: "Zusammen oder getrennt?", zh: "ä¸€èµ·ä»˜è¿˜æ˜¯åˆ†å¼€ä»˜ï¼Ÿ" },
                { de: "Kann ich mit Karte zahlen?", zh: "å¯ä»¥åˆ·å¡å—ï¼Ÿ" },
                { de: "Das war sehr lecker!", zh: "éå¸¸å¥½åƒï¼" },
                { de: "Haben Sie einen Tisch fÃ¼r zwei?", zh: "æœ‰ä¸¤äººçš„æ¡Œå­å—ï¼Ÿ" }
            ],
            cafe: [
                { de: "Einen Kaffee, bitte.", zh: "è¯·æ¥ä¸€æ¯å’–å•¡ã€‚" },
                { de: "Mit Milch oder ohne?", zh: "è¦åŠ ç‰›å¥¶å—ï¼Ÿ" },
                { de: "Zum Mitnehmen, bitte.", zh: "è¯·æ‰“åŒ…å¸¦èµ°ã€‚" },
                { de: "FÃ¼r hier, bitte.", zh: "åœ¨è¿™é‡Œå–ã€‚" },
                { de: "Haben Sie Hafermilch?", zh: "æœ‰ç‡•éº¦å¥¶å—ï¼Ÿ" },
                { de: "Einen Cappuccino, bitte.", zh: "è¯·æ¥ä¸€æ¯å¡å¸ƒå¥‡è¯ºã€‚" },
                { de: "Wie viel kostet das?", zh: "è¿™ä¸ªå¤šå°‘é’±ï¼Ÿ" },
                { de: "Kann ich hier arbeiten?", zh: "æˆ‘å¯ä»¥åœ¨è¿™é‡Œå·¥ä½œå—ï¼Ÿ" }
            ],
            fastfood: [
                { de: "Zum Mitnehmen oder hier essen?", zh: "å¸¦èµ°è¿˜æ˜¯åœ¨è¿™å„¿åƒï¼Ÿ" },
                { de: "Einmal Nummer drei, bitte.", zh: "è¯·æ¥ä¸€ä»½3å·å¥—é¤ã€‚" },
                { de: "Mit Pommes?", zh: "è¦è–¯æ¡å—ï¼Ÿ" },
                { de: "Welche SoÃŸe mÃ¶chten Sie?", zh: "æ‚¨è¦ä»€ä¹ˆé…±ï¼Ÿ" },
                { de: "Ohne Zwiebeln, bitte.", zh: "è¯·ä¸è¦æ´‹è‘±ã€‚" },
                { de: "Das ist alles.", zh: "å°±è¿™äº›äº†ã€‚" }
            ],
            bar: [
                { de: "Ein Bier, bitte.", zh: "è¯·æ¥ä¸€æ¯å•¤é…’ã€‚" },
                { de: "Was haben Sie vom Fass?", zh: "æœ‰ä»€ä¹ˆæ‰å•¤ï¼Ÿ" },
                { de: "Die GetrÃ¤nkekarte, bitte.", zh: "è¯·ç»™æˆ‘é…’æ°´å•ã€‚" },
                { de: "Noch eine Runde!", zh: "å†æ¥ä¸€è½®ï¼" },
                { de: "Prost!", zh: "å¹²æ¯ï¼" },
                { de: "Ist hier noch frei?", zh: "è¿™é‡Œæœ‰äººå—ï¼Ÿ" }
            ],
            bakery: [
                { de: "Zwei BrÃ¶tchen, bitte.", zh: "è¯·æ¥ä¸¤ä¸ªå°é¢åŒ…ã€‚" },
                { de: "Ist das frisch?", zh: "è¿™æ˜¯æ–°é²œçš„å—ï¼Ÿ" },
                { de: "Ein StÃ¼ck Kuchen, bitte.", zh: "è¯·æ¥ä¸€å—è›‹ç³•ã€‚" },
                { de: "Haben Sie Vollkornbrot?", zh: "æœ‰å…¨éº¦é¢åŒ…å—ï¼Ÿ" },
                { de: "Das da, bitte.", zh: "è¯·ç»™æˆ‘é‚£ä¸ªã€‚" }
            ],
            transport: [
                { de: "Wo ist die nÃ¤chste U-Bahn?", zh: "æœ€è¿‘çš„åœ°é“ç«™åœ¨å“ªï¼Ÿ" },
                { de: "Eine Fahrkarte nach...", zh: "ä¸€å¼ å»...çš„ç¥¨" },
                { de: "Welche Linie fÃ¤hrt zum...?", zh: "å“ªæ¡çº¿å»...ï¼Ÿ" },
                { de: "Wo muss ich aussteigen?", zh: "æˆ‘åœ¨å“ªé‡Œä¸‹è½¦ï¼Ÿ" },
                { de: "Muss ich umsteigen?", zh: "æˆ‘éœ€è¦æ¢ä¹˜å—ï¼Ÿ" },
                { de: "HÃ¤lt dieser Bus in...?", zh: "è¿™è¾†å…¬äº¤åœ¨...åœå—ï¼Ÿ" },
                { de: "Wann kommt der nÃ¤chste Zug?", zh: "ä¸‹ä¸€ç­è½¦ä»€ä¹ˆæ—¶å€™æ¥ï¼Ÿ" },
                { de: "Ist dieser Platz frei?", zh: "è¿™ä¸ªåº§ä½æœ‰äººå—ï¼Ÿ" }
            ],
            train: [
                { de: "Ich mÃ¶chte einen Platz reservieren.", zh: "æˆ‘æƒ³é¢„è®¢ä¸€ä¸ªåº§ä½ã€‚" },
                { de: "Wann fÃ¤hrt der Zug ab?", zh: "ç«è½¦ä»€ä¹ˆæ—¶å€™å‘è½¦ï¼Ÿ" },
                { de: "Von welchem Gleis?", zh: "ä»å“ªä¸ªç«™å°ï¼Ÿ" },
                { de: "HÃ¤lt dieser Zug in...?", zh: "è¿™åˆ—è½¦åœ¨...åœå—ï¼Ÿ" },
                { de: "Ist das der Zug nach...?", zh: "è¿™æ˜¯å»...çš„ç«è½¦å—ï¼Ÿ" },
                { de: "Erste oder zweite Klasse?", zh: "ä¸€ç­‰åº§è¿˜æ˜¯äºŒç­‰åº§ï¼Ÿ" },
                { de: "Der Zug hat VerspÃ¤tung.", zh: "ç«è½¦æ™šç‚¹äº†ã€‚" }
            ],
            taxi: [
                { de: "KÃ¶nnen Sie mich zum... bringen?", zh: "èƒ½é€æˆ‘å»...å—ï¼Ÿ" },
                { de: "Wie viel kostet es ungefÃ¤hr?", zh: "å¤§æ¦‚å¤šå°‘é’±ï¼Ÿ" },
                { de: "Hier ist gut, danke.", zh: "è¿™é‡Œåœå°±å¥½ï¼Œè°¢è°¢ã€‚" },
                { de: "KÃ¶nnen Sie hier anhalten?", zh: "èƒ½åœ¨è¿™åœå—ï¼Ÿ" },
                { de: "Ich brauche eine Quittung.", zh: "æˆ‘éœ€è¦ä¸€å¼ æ”¶æ®ã€‚" },
                { de: "Haben Sie Wechselgeld?", zh: "æœ‰é›¶é’±å—ï¼Ÿ" }
            ],
            directions: [
                { de: "Wie komme ich zum...?", zh: "æ€ä¹ˆå»...ï¼Ÿ" },
                { de: "Ist es weit von hier?", zh: "ç¦»è¿™å„¿è¿œå—ï¼Ÿ" },
                { de: "KÃ¶nnen Sie mir das auf der Karte zeigen?", zh: "èƒ½åœ¨åœ°å›¾ä¸Šç»™æˆ‘æŒ‡ä¸€ä¸‹å—ï¼Ÿ" },
                { de: "Geradeaus, dann links.", zh: "ç›´èµ°ï¼Œç„¶åå·¦è½¬ã€‚" },
                { de: "Ich habe mich verlaufen.", zh: "æˆ‘è¿·è·¯äº†ã€‚" },
                { de: "Wo ist der Ausgang?", zh: "å‡ºå£åœ¨å“ªï¼Ÿ" }
            ],
            airport: [
                { de: "Wo ist der Check-in?", zh: "å€¼æœºåœ¨å“ªé‡Œï¼Ÿ" },
                { de: "Welches Gate?", zh: "å“ªä¸ªç™»æœºå£ï¼Ÿ" },
                { de: "Ich habe nur HandgepÃ¤ck.", zh: "æˆ‘åªæœ‰éšèº«è¡Œæã€‚" },
                { de: "Wo ist die GepÃ¤ckausgabe?", zh: "è¡Œææå–å¤„åœ¨å“ªï¼Ÿ" },
                { de: "Mein GepÃ¤ck ist verloren.", zh: "æˆ‘çš„è¡Œæä¸¢äº†ã€‚" },
                { de: "Wo kann ich ein Taxi nehmen?", zh: "å“ªé‡Œå¯ä»¥æ‰“è½¦ï¼Ÿ" }
            ],
            car: [
                { de: "Volltanken, bitte.", zh: "è¯·åŠ æ»¡æ²¹ã€‚" },
                { de: "Wo ist die nÃ¤chste Tankstelle?", zh: "æœ€è¿‘çš„åŠ æ²¹ç«™åœ¨å“ªï¼Ÿ" },
                { de: "Mein Auto startet nicht.", zh: "æˆ‘çš„è½¦æ‰“ä¸ç€ç«ã€‚" },
                { de: "Ich habe eine Panne.", zh: "æˆ‘çš„è½¦æŠ›é”šäº†ã€‚" },
                { de: "KÃ¶nnen Sie das reparieren?", zh: "æ‚¨èƒ½ä¿®å—ï¼Ÿ" },
                { de: "Wie lange dauert das?", zh: "éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ" }
            ],
            supermarket: [
                { de: "Wo finde ich...?", zh: "...åœ¨å“ªé‡Œï¼Ÿ" },
                { de: "Haben Sie...?", zh: "ä½ ä»¬æœ‰...å—ï¼Ÿ" },
                { de: "Das ist alles.", zh: "å°±è¿™äº›äº†ã€‚" },
                { de: "Brauchen Sie eine TÃ¼te?", zh: "éœ€è¦è¢‹å­å—ï¼Ÿ" },
                { de: "Kann ich mit Karte zahlen?", zh: "å¯ä»¥åˆ·å¡å—ï¼Ÿ" },
                { de: "Wo ist die Kasse?", zh: "æ”¶é“¶å°åœ¨å“ªï¼Ÿ" },
                { de: "Haben Sie das auch in Bio?", zh: "æœ‰æœ‰æœºçš„å—ï¼Ÿ" }
            ],
            clothing: [
                { de: "Kann ich das anprobieren?", zh: "æˆ‘å¯ä»¥è¯•ç©¿å—ï¼Ÿ" },
                { de: "Haben Sie das in GrÃ¶ÃŸe...?", zh: "æœ‰...å·çš„å—ï¼Ÿ" },
                { de: "Das ist zu groÃŸ/klein.", zh: "è¿™ä¸ªå¤ªå¤§/å°äº†ã€‚" },
                { de: "Wo ist die Umkleidekabine?", zh: "è¯•è¡£é—´åœ¨å“ªï¼Ÿ" },
                { de: "Kann ich das umtauschen?", zh: "å¯ä»¥æ¢è´§å—ï¼Ÿ" },
                { de: "Haben Sie das in einer anderen Farbe?", zh: "æœ‰å…¶ä»–é¢œè‰²å—ï¼Ÿ" }
            ],
            electronics: [
                { de: "Funktioniert das mit...?", zh: "è¿™ä¸ªèƒ½é…åˆ...ä½¿ç”¨å—ï¼Ÿ" },
                { de: "Wie lange ist die Garantie?", zh: "ä¿ä¿®å¤šé•¿æ—¶é—´ï¼Ÿ" },
                { de: "Kann ich das zurÃ¼ckgeben?", zh: "å¯ä»¥é€€è´§å—ï¼Ÿ" },
                { de: "Haben Sie ein Ladekabel fÃ¼r...?", zh: "æœ‰...çš„å……ç”µçº¿å—ï¼Ÿ" },
                { de: "Das funktioniert nicht.", zh: "è¿™ä¸ªä¸å·¥ä½œäº†ã€‚" }
            ],
            returns: [
                { de: "Ich mÃ¶chte das zurÃ¼ckgeben.", zh: "æˆ‘æƒ³é€€è´§ã€‚" },
                { de: "Hier ist die Rechnung.", zh: "è¿™æ˜¯æ”¶æ®ã€‚" },
                { de: "Es ist kaputt.", zh: "å®ƒåäº†ã€‚" },
                { de: "Wann bekomme ich mein Geld zurÃ¼ck?", zh: "ä»€ä¹ˆæ—¶å€™èƒ½é€€æ¬¾ï¼Ÿ" },
                { de: "Wo ist die Abholstation?", zh: "è‡ªæç‚¹åœ¨å“ªï¼Ÿ" },
                { de: "Mein Paket ist nicht angekommen.", zh: "æˆ‘çš„åŒ…è£¹æ²¡åˆ°ã€‚" }
            ],
            greeting: [
                { de: "Guten Morgen!", zh: "æ—©ä¸Šå¥½ï¼" },
                { de: "Guten Tag!", zh: "ä½ å¥½ï¼" },
                { de: "Guten Abend!", zh: "æ™šä¸Šå¥½ï¼" },
                { de: "Wie geht's?", zh: "ä½ å¥½å—ï¼Ÿ" },
                { de: "Mir geht's gut, danke.", zh: "æˆ‘å¾ˆå¥½ï¼Œè°¢è°¢ã€‚" },
                { de: "TschÃ¼ss!", zh: "å†è§ï¼" },
                { de: "Bis spÃ¤ter!", zh: "å¾…ä¼šè§ï¼" },
                { de: "SchÃ¶nes Wochenende!", zh: "å‘¨æœ«æ„‰å¿«ï¼" },
                { de: "Alles klar?", zh: "è¿˜å¥½å—ï¼Ÿ" },
                { de: "Mach's gut!", zh: "ä¿é‡ï¼" }
            ],
            intro: [
                { de: "Ich heiÃŸe...", zh: "æˆ‘å«..." },
                { de: "Ich komme aus China.", zh: "æˆ‘æ¥è‡ªä¸­å›½ã€‚" },
                { de: "Ich wohne in...", zh: "æˆ‘ä½åœ¨..." },
                { de: "Ich arbeite als...", zh: "æˆ‘çš„å·¥ä½œæ˜¯..." },
                { de: "Ich lerne Deutsch.", zh: "æˆ‘åœ¨å­¦å¾·è¯­ã€‚" },
                { de: "Freut mich!", zh: "å¾ˆé«˜å…´è®¤è¯†ä½ ï¼" },
                { de: "Ich bin neu hier.", zh: "æˆ‘æ˜¯æ–°æ¥çš„ã€‚" }
            ],
            neighbor: [
                { de: "Kann ich mir... ausleihen?", zh: "æˆ‘èƒ½å€Ÿä¸€ä¸‹...å—ï¼Ÿ" },
                { de: "Es tut mir leid wegen des LÃ¤rms.", zh: "æŠ±æ­‰æ‰“æ‰°åˆ°æ‚¨äº†ã€‚" },
                { de: "Ich wohne nebenan.", zh: "æˆ‘ä½éš”å£ã€‚" },
                { de: "KÃ¶nnen Sie mir bitte helfen?", zh: "æ‚¨èƒ½å¸®æˆ‘ä¸€ä¸‹å—ï¼Ÿ" },
                { de: "Das Paket ist fÃ¼r Sie.", zh: "è¿™ä¸ªåŒ…è£¹æ˜¯ç»™æ‚¨çš„ã€‚" },
                { de: "SchÃ¶nen Tag noch!", zh: "ç¥æ‚¨ä»Šå¤©æ„‰å¿«ï¼" }
            ],
            thanks: [
                { de: "Danke schÃ¶n!", zh: "éå¸¸æ„Ÿè°¢ï¼" },
                { de: "Vielen Dank!", zh: "å¤šè°¢ï¼" },
                { de: "Es tut mir leid.", zh: "å¯¹ä¸èµ·ã€‚" },
                { de: "Entschuldigung!", zh: "æŠ±æ­‰ï¼" },
                { de: "Kein Problem.", zh: "æ²¡å…³ç³»ã€‚" },
                { de: "Macht nichts.", zh: "æ²¡äº‹ã€‚" },
                { de: "Bitte schÃ¶n.", zh: "ä¸å®¢æ°”ã€‚" },
                { de: "Das ist sehr nett von Ihnen.", zh: "æ‚¨äººçœŸå¥½ã€‚" }
            ],
            weather: [
                { de: "SchÃ¶nes Wetter heute!", zh: "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼" },
                { de: "Es regnet.", zh: "ä¸‹é›¨äº†ã€‚" },
                { de: "Es ist kalt.", zh: "å¥½å†·ã€‚" },
                { de: "Es schneit!", zh: "ä¸‹é›ªäº†ï¼" },
                { de: "Wie ist das Wetter morgen?", zh: "æ˜å¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ" },
                { de: "Der FrÃ¼hling kommt!", zh: "æ˜¥å¤©æ¥äº†ï¼" }
            ],
            doctor: [
                { de: "Ich mÃ¶chte einen Termin.", zh: "æˆ‘æƒ³é¢„çº¦ã€‚" },
                { de: "Ich habe Schmerzen hier.", zh: "æˆ‘è¿™é‡Œç—›ã€‚" },
                { de: "Ich habe Fieber.", zh: "æˆ‘å‘çƒ§äº†ã€‚" },
                { de: "Ich fÃ¼hle mich nicht gut.", zh: "æˆ‘æ„Ÿè§‰ä¸èˆ’æœã€‚" },
                { de: "Seit wann haben Sie das?", zh: "è¿™ç§æƒ…å†µå¤šä¹…äº†ï¼Ÿ" },
                { de: "Ich brauche eine Krankmeldung.", zh: "æˆ‘éœ€è¦ç—…å‡æ¡ã€‚" },
                { de: "Haben Sie Ihre Versicherungskarte?", zh: "æ‚¨æœ‰ä¿é™©å¡å—ï¼Ÿ" },
                { de: "Muss ich ins Krankenhaus?", zh: "æˆ‘éœ€è¦å»åŒ»é™¢å—ï¼Ÿ" }
            ],
            pharmacy: [
                { de: "Ich brauche etwas gegen...", zh: "æˆ‘éœ€è¦æ²»...çš„è¯" },
                { de: "Haben Sie Kopfschmerztabletten?", zh: "æœ‰å¤´ç—›è¯å—ï¼Ÿ" },
                { de: "Wie oft soll ich das nehmen?", zh: "æˆ‘è¯¥å¤šä¹…åƒä¸€æ¬¡ï¼Ÿ" },
                { de: "Gibt es Nebenwirkungen?", zh: "æœ‰å‰¯ä½œç”¨å—ï¼Ÿ" },
                { de: "Brauche ich ein Rezept?", zh: "éœ€è¦å¤„æ–¹å—ï¼Ÿ" },
                { de: "Haben Sie das rezeptfrei?", zh: "æœ‰éå¤„æ–¹çš„å—ï¼Ÿ" }
            ],
            dentist: [
                { de: "Ich habe Zahnschmerzen.", zh: "æˆ‘ç‰™ç—›ã€‚" },
                { de: "Ich brauche eine FÃ¼llung.", zh: "æˆ‘éœ€è¦è¡¥ç‰™ã€‚" },
                { de: "Ich brauche eine neue Brille.", zh: "æˆ‘éœ€è¦é…æ–°çœ¼é•œã€‚" },
                { de: "Meine Sehkraft hat sich verschlechtert.", zh: "æˆ‘çš„è§†åŠ›ä¸‹é™äº†ã€‚" },
                { de: "Wann ist der nÃ¤chste freie Termin?", zh: "æœ€è¿‘çš„ç©ºæ¡£æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ" }
            ],
            housing: [
                { de: "Ich suche eine Wohnung.", zh: "æˆ‘åœ¨æ‰¾æˆ¿å­ã€‚" },
                { de: "Wie hoch ist die Miete?", zh: "æˆ¿ç§Ÿå¤šå°‘ï¼Ÿ" },
                { de: "Sind Nebenkosten inklusive?", zh: "åŒ…å«æ‚è´¹å—ï¼Ÿ" },
                { de: "Ab wann ist die Wohnung frei?", zh: "æˆ¿å­ä»€ä¹ˆæ—¶å€™èƒ½å…¥ä½ï¼Ÿ" },
                { de: "Wie hoch ist die Kaution?", zh: "æŠ¼é‡‘å¤šå°‘ï¼Ÿ" },
                { de: "Kann ich die Wohnung besichtigen?", zh: "æˆ‘å¯ä»¥çœ‹æˆ¿å—ï¼Ÿ" },
                { de: "Sind Haustiere erlaubt?", zh: "å¯ä»¥å…»å® ç‰©å—ï¼Ÿ" }
            ],
            repair: [
                { de: "Die Heizung funktioniert nicht.", zh: "æš–æ°”åäº†ã€‚" },
                { de: "Es gibt ein Wasserleck.", zh: "æœ‰æ¼æ°´ã€‚" },
                { de: "Der Strom ist ausgefallen.", zh: "åœç”µäº†ã€‚" },
                { de: "Die Toilette ist verstopft.", zh: "é©¬æ¡¶å µäº†ã€‚" },
                { de: "KÃ¶nnen Sie einen Handwerker schicken?", zh: "èƒ½æ´¾äººæ¥ä¿®å—ï¼Ÿ" },
                { de: "Es ist dringend!", zh: "å¾ˆç´§æ€¥ï¼" }
            ],
            post: [
                { de: "Ich mÃ¶chte das nach China schicken.", zh: "æˆ‘æƒ³å¯„è¿™ä¸ªå»ä¸­å›½ã€‚" },
                { de: "Wie lange dauert das?", zh: "éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ" },
                { de: "Wie viel kostet das Porto?", zh: "é‚®è´¹å¤šå°‘ï¼Ÿ" },
                { de: "Wo kann ich mein Paket abholen?", zh: "æˆ‘åœ¨å“ªé‡Œå–åŒ…è£¹ï¼Ÿ" },
                { de: "Ich habe einen Abholschein.", zh: "æˆ‘æœ‰å–ä»¶å•ã€‚" },
                { de: "Per Einschreiben, bitte.", zh: "è¯·ç”¨æŒ‚å·ä¿¡ã€‚" }
            ],
            bank: [
                { de: "Ich mÃ¶chte ein Konto erÃ¶ffnen.", zh: "æˆ‘æƒ³å¼€æˆ·ã€‚" },
                { de: "Ich mÃ¶chte Geld Ã¼berweisen.", zh: "æˆ‘æƒ³è½¬è´¦ã€‚" },
                { de: "Ich mÃ¶chte Geld abheben.", zh: "æˆ‘æƒ³å–é’±ã€‚" },
                { de: "Meine Karte funktioniert nicht.", zh: "æˆ‘çš„å¡ä¸èƒ½ç”¨äº†ã€‚" },
                { de: "Wie ist der Wechselkurs?", zh: "æ±‡ç‡æ˜¯å¤šå°‘ï¼Ÿ" },
                { de: "Ich habe meine PIN vergessen.", zh: "æˆ‘å¿˜äº†å¯†ç ã€‚" }
            ],
            haircut: [
                { de: "Nur die Spitzen, bitte.", zh: "è¯·åªå‰ªå‘æ¢¢ã€‚" },
                { de: "Etwas kÃ¼rzer, bitte.", zh: "è¯·å‰ªçŸ­ä¸€ç‚¹ã€‚" },
                { de: "Waschen und Schneiden, bitte.", zh: "è¯·æ´—å‰ªã€‚" },
                { de: "Ich mÃ¶chte die Haare fÃ¤rben.", zh: "æˆ‘æƒ³æŸ“å‘ã€‚" },
                { de: "So ist es gut.", zh: "è¿™æ ·å°±å¥½äº†ã€‚" },
                { de: "Haben Sie heute noch einen Termin frei?", zh: "ä»Šå¤©è¿˜æœ‰ç©ºæ¡£å—ï¼Ÿ" }
            ],
            gym: [
                { de: "Ich mÃ¶chte mich anmelden.", zh: "æˆ‘æƒ³åŠå¡ã€‚" },
                { de: "Wie viel kostet eine Monatskarte?", zh: "æœˆå¡å¤šå°‘é’±ï¼Ÿ" },
                { de: "Wo sind die Umkleiden?", zh: "æ›´è¡£å®¤åœ¨å“ªï¼Ÿ" },
                { de: "Kann ich heute probetrainieren?", zh: "ä»Šå¤©å¯ä»¥è¯•ç»ƒå—ï¼Ÿ" },
                { de: "Wie funktioniert dieses GerÃ¤t?", zh: "è¿™ä¸ªå™¨æ¢°æ€ä¹ˆç”¨ï¼Ÿ" },
                { de: "Ich mÃ¶chte meinen Vertrag kÃ¼ndigen.", zh: "æˆ‘æƒ³è§£çº¦ã€‚" }
            ],
            laundry: [
                { de: "KÃ¶nnen Sie das reinigen?", zh: "èƒ½æ´—è¿™ä¸ªå—ï¼Ÿ" },
                { de: "Wann kann ich es abholen?", zh: "ä»€ä¹ˆæ—¶å€™å¯ä»¥å–ï¼Ÿ" },
                { de: "KÃ¶nnen Sie diesen Fleck entfernen?", zh: "èƒ½å»æ‰è¿™ä¸ªæ±¡æ¸å—ï¼Ÿ" },
                { de: "Ich brauche das dringend.", zh: "æˆ‘æ€¥ç”¨ã€‚" },
                { de: "Hier ist mein Abholschein.", zh: "è¿™æ˜¯æˆ‘çš„å–è¡£å•ã€‚" }
            ],
            cityhall: [
                { de: "Ich mÃ¶chte mich anmelden.", zh: "æˆ‘æƒ³ç™»è®°ä½å€ã€‚" },
                { de: "Welche Unterlagen brauche ich?", zh: "æˆ‘éœ€è¦ä»€ä¹ˆææ–™ï¼Ÿ" },
                { de: "Wo bekomme ich einen Termin?", zh: "åœ¨å“ªé‡Œé¢„çº¦ï¼Ÿ" },
                { de: "Wie lange dauert das?", zh: "éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ" },
                { de: "Ich brauche eine Bescheinigung.", zh: "æˆ‘éœ€è¦ä¸€ä»½è¯æ˜ã€‚" },
                { de: "Wo muss ich unterschreiben?", zh: "æˆ‘åœ¨å“ªé‡Œç­¾å­—ï¼Ÿ" }
            ],
            telecom: [
                { de: "Ich mÃ¶chte eine SIM-Karte kaufen.", zh: "æˆ‘æƒ³ä¹°ä¸€å¼ SIMå¡ã€‚" },
                { de: "Wie viel Datenvolumen habe ich?", zh: "æˆ‘æœ‰å¤šå°‘æµé‡ï¼Ÿ" },
                { de: "Ich mÃ¶chte meinen Tarif wechseln.", zh: "æˆ‘æƒ³æ¢å¥—é¤ã€‚" },
                { de: "Mein Internet funktioniert nicht.", zh: "æˆ‘çš„ç½‘ç»œä¸èƒ½ç”¨äº†ã€‚" },
                { de: "Wann lÃ¤uft mein Vertrag aus?", zh: "æˆ‘çš„åˆçº¦ä»€ä¹ˆæ—¶å€™åˆ°æœŸï¼Ÿ" },
                { de: "Ich mÃ¶chte kÃ¼ndigen.", zh: "æˆ‘æƒ³è§£çº¦ã€‚" }
            ],
            office: [
                { de: "Ich verstehe.", zh: "æˆ‘æ˜ç™½äº†ã€‚" },
                { de: "Ich verstehe nicht.", zh: "æˆ‘ä¸æ˜ç™½ã€‚" },
                { de: "KÃ¶nnen Sie das wiederholen?", zh: "æ‚¨èƒ½é‡å¤ä¸€ä¸‹å—ï¼Ÿ" },
                { de: "Einen Moment, bitte.", zh: "è¯·ç¨ç­‰ã€‚" },
                { de: "Ich melde mich bei Ihnen.", zh: "æˆ‘ä¼šè”ç³»æ‚¨çš„ã€‚" },
                { de: "Bis wann brauchen Sie das?", zh: "æ‚¨ä»€ä¹ˆæ—¶å€™éœ€è¦ï¼Ÿ" },
                { de: "Ich arbeite daran.", zh: "æˆ‘åœ¨å¤„ç†ä¸­ã€‚" }
            ],
            leave: [
                { de: "Ich mÃ¶chte Urlaub beantragen.", zh: "æˆ‘æƒ³è¯·å‡ã€‚" },
                { de: "Ich bin krank.", zh: "æˆ‘ç”Ÿç—…äº†ã€‚" },
                { de: "Ich komme morgen nicht.", zh: "æˆ‘æ˜å¤©ä¸æ¥ã€‚" },
                { de: "Ich arbeite von zu Hause.", zh: "æˆ‘åœ¨å®¶åŠå…¬ã€‚" },
                { de: "Wann kommen Sie zurÃ¼ck?", zh: "æ‚¨ä»€ä¹ˆæ—¶å€™å›æ¥ï¼Ÿ" }
            ],
            interview: [
                { de: "Ich habe mich fÃ¼r die Stelle beworben.", zh: "æˆ‘ç”³è¯·äº†è¿™ä¸ªèŒä½ã€‚" },
                { de: "Meine StÃ¤rken sind...", zh: "æˆ‘çš„ä¼˜åŠ¿æ˜¯..." },
                { de: "Ich habe Erfahrung in...", zh: "æˆ‘åœ¨...æ–¹é¢æœ‰ç»éªŒ" },
                { de: "Ab wann kÃ¶nnte ich anfangen?", zh: "æˆ‘ä»€ä¹ˆæ—¶å€™å¯ä»¥å¼€å§‹ï¼Ÿ" },
                { de: "Haben Sie noch Fragen?", zh: "æ‚¨è¿˜æœ‰é—®é¢˜å—ï¼Ÿ" },
                { de: "Wie hoch ist das Gehalt?", zh: "å·¥èµ„æ˜¯å¤šå°‘ï¼Ÿ" }
            ],
            emergency: [
                { de: "Hilfe!", zh: "æ•‘å‘½ï¼" },
                { de: "Rufen Sie die Polizei!", zh: "è¯·æŠ¥è­¦ï¼" },
                { de: "Rufen Sie einen Krankenwagen!", zh: "è¯·å«æ•‘æŠ¤è½¦ï¼" },
                { de: "Es brennt!", zh: "ç€ç«äº†ï¼" },
                { de: "Es ist ein Notfall!", zh: "è¿™æ˜¯ç´§æ€¥æƒ…å†µï¼" },
                { de: "Ich brauche Hilfe!", zh: "æˆ‘éœ€è¦å¸®åŠ©ï¼" },
                { de: "Wo ist der nÃ¤chste Notausgang?", zh: "æœ€è¿‘çš„ç´§æ€¥å‡ºå£åœ¨å“ªï¼Ÿ" }
            ],
            complaint: [
                { de: "Ich mÃ¶chte mich beschweren.", zh: "æˆ‘æƒ³æŠ•è¯‰ã€‚" },
                { de: "Das ist nicht akzeptabel.", zh: "è¿™ä¸èƒ½æ¥å—ã€‚" },
                { de: "Ich mÃ¶chte den Manager sprechen.", zh: "æˆ‘æƒ³å’Œç»ç†è°ˆè°ˆã€‚" },
                { de: "Ich mÃ¶chte mein Geld zurÃ¼ck.", zh: "æˆ‘è¦é€€æ¬¾ã€‚" },
                { de: "Das entspricht nicht der Beschreibung.", zh: "è¿™ä¸æè¿°ä¸ç¬¦ã€‚" },
                { de: "Ich werde das melden.", zh: "æˆ‘ä¼šä¸¾æŠ¥çš„ã€‚" }
            ]
        };

        // ========== State ==========
        let currentPage = 'home';
        let currentScene = null;
        let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
        let lastAIResult = null;

        // ========== Init ==========
        function init() {
            renderCategories();
            renderFavorites();
            loadApiKey();

            // Enter key for AI search
            document.getElementById('aiInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') askAI();
            });

            // Register service worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js').catch(console.error);
            }
        }

        // ========== Render ==========
        function renderCategories() {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';

            for (const [sectionName, items] of Object.entries(categories)) {
                const section = document.createElement('div');
                section.className = 'category-section';
                section.innerHTML = `
                    <h2>${sectionName}</h2>
                    <div class="category-grid">
                        ${items.map(item => `
                            <button class="category-item" onclick="openScene('${item.id}', '${item.emoji}', '${item.name}')">
                                <div class="emoji">${item.emoji}</div>
                                <div class="name">${item.name}</div>
                            </button>
                        `).join('')}
                    </div>
                `;
                container.appendChild(section);
            }
        }

        function renderPhrases(sceneId) {
            const list = document.getElementById('phraseList');
            const scenePhrases = phrases[sceneId] || [];
            
            list.innerHTML = scenePhrases.map((phrase, idx) => `
                <div class="phrase-card">
                    <div class="german">${phrase.de}</div>
                    <div class="chinese">${phrase.zh}</div>
                    <button class="favorite-btn ${isFavorite(phrase.de) ? 'favorited' : ''}" 
                            onclick="toggleFavorite('${escapeHtml(phrase.de)}', '${escapeHtml(phrase.zh)}', this)">
                        ${isFavorite(phrase.de) ? 'â­' : 'â˜†'}
                    </button>
                </div>
            `).join('');
        }

        function renderFavorites() {
            const list = document.getElementById('favoritesList');
            const empty = document.getElementById('emptyFavorites');

            if (favorites.length === 0) {
                empty.style.display = 'block';
                list.innerHTML = '';
                return;
            }

            empty.style.display = 'none';
            list.innerHTML = favorites.map(phrase => `
                <div class="phrase-card">
                    <div class="german">${phrase.de}</div>
                    <div class="chinese">${phrase.zh}</div>
                    <button class="favorite-btn favorited" 
                            onclick="toggleFavorite('${escapeHtml(phrase.de)}', '${escapeHtml(phrase.zh)}', this)">
                        â­
                    </button>
                </div>
            `).join('');
        }

        // ========== Navigation ==========
        function showPage(pageName) {
            currentPage = pageName;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageName}`).classList.add('active');

            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            const tabBtn = document.querySelector(`.tab-item[data-page="${pageName}"]`);
            if (tabBtn) tabBtn.classList.add('active');

            const backBtn = document.getElementById('backBtn');
            const title = document.getElementById('headerTitle');

            if (pageName === 'home') {
                backBtn.classList.remove('visible');
                title.textContent = 'å¾·è¯­ç”Ÿå­˜æ‰‹å†Œ';
                currentScene = null;
            } else if (pageName === 'scene') {
                backBtn.classList.add('visible');
            } else if (pageName === 'favorites') {
                backBtn.classList.remove('visible');
                title.textContent = 'æˆ‘çš„æ”¶è—';
                renderFavorites();
            } else if (pageName === 'settings') {
                backBtn.classList.add('visible');
                title.textContent = 'è®¾ç½®';
            }
        }

        function openScene(sceneId, emoji, name) {
            currentScene = sceneId;
            const header = document.getElementById('sceneHeader');
            header.querySelector('.emoji').textContent = emoji;
            header.querySelector('h2').textContent = name;
            document.getElementById('headerTitle').textContent = name;
            
            renderPhrases(sceneId);
            showPage('scene');
        }

        function goBack() {
            if (currentPage === 'scene') {
                showPage('home');
            } else if (currentPage === 'settings') {
                showPage('home');
            }
        }

        // ========== Favorites ==========
        function isFavorite(de) {
            return favorites.some(f => f.de === de);
        }

        function toggleFavorite(de, zh, btn) {
            const idx = favorites.findIndex(f => f.de === de);
            if (idx >= 0) {
                favorites.splice(idx, 1);
                btn.classList.remove('favorited');
                btn.textContent = 'â˜†';
                showToast('å·²å–æ¶ˆæ”¶è—');
            } else {
                favorites.push({ de, zh });
                btn.classList.add('favorited');
                btn.textContent = 'â­';
                showToast('å·²æ”¶è—');
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            
            if (currentPage === 'favorites') {
                renderFavorites();
            }
        }

        function clearFavorites() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ”¶è—å—ï¼Ÿ')) {
                favorites = [];
                localStorage.setItem('favorites', JSON.stringify(favorites));
                renderFavorites();
                showToast('å·²æ¸…é™¤æ‰€æœ‰æ”¶è—');
            }
        }

        // ========== AI ==========
        async function askAI() {
            const input = document.getElementById('aiInput');
            const query = input.value.trim();
            if (!query) return;

            const apiKey = localStorage.getItem('geminiApiKey');
            if (!apiKey) {
                showToast('è¯·å…ˆåœ¨è®¾ç½®ä¸­é…ç½® API Key');
                showPage('settings');
                return;
            }

            const btn = document.getElementById('aiSearchBtn');
            const loading = document.getElementById('aiLoading');
            const result = document.getElementById('aiResult');

            btn.disabled = true;
            loading.classList.add('visible');
            result.classList.remove('visible');

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `ä½ æ˜¯ä¸€ä¸ªå¾·è¯­å£è¯­åŠ©æ‰‹ã€‚ç”¨æˆ·æƒ³ç”¨å¾·è¯­è¡¨è¾¾ä»¥ä¸‹æ„æ€ï¼Œè¯·ç»™å‡ºæœ€åœ°é“ã€æœ€æ—¥å¸¸çš„å¾·è¯­å£è¯­è¡¨è¾¾ã€‚

ç”¨æˆ·æƒ³è¯´ï¼š${query}

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼å›å¤ï¼ˆåªå›å¤è¿™ä¸ªæ ¼å¼ï¼Œä¸è¦å…¶ä»–å†…å®¹ï¼‰ï¼š
å¾·è¯­ï¼š[å¾·è¯­å¥å­]
ä¸­æ–‡ï¼š[ä¸­æ–‡ç¿»è¯‘]
å¤‡æ³¨ï¼š[ç®€çŸ­çš„ä½¿ç”¨åœºæ™¯æˆ–æ³¨æ„äº‹é¡¹ï¼Œå¯é€‰]`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';

                const deMatch = text.match(/å¾·è¯­[ï¼š:]\s*(.+)/);
                const zhMatch = text.match(/ä¸­æ–‡[ï¼š:]\s*(.+)/);
                const noteMatch = text.match(/å¤‡æ³¨[ï¼š:]\s*(.+)/);

                if (deMatch && zhMatch) {
                    lastAIResult = {
                        de: deMatch[1].trim(),
                        zh: zhMatch[1].trim(),
                        note: noteMatch ? noteMatch[1].trim() : ''
                    };

                    document.getElementById('aiResultGerman').textContent = lastAIResult.de;
                    document.getElementById('aiResultChinese').textContent = lastAIResult.zh;
                    document.getElementById('aiResultNote').textContent = lastAIResult.note;
                    result.classList.add('visible');
                } else {
                    showToast('AI è¿”å›æ ¼å¼æœ‰è¯¯ï¼Œè¯·é‡è¯•');
                }
            } catch (err) {
                console.error(err);
                showToast('æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ– API Key');
            } finally {
                btn.disabled = false;
                loading.classList.remove('visible');
            }
        }

        function saveAIResult() {
            if (lastAIResult) {
                if (!isFavorite(lastAIResult.de)) {
                    favorites.push({ de: lastAIResult.de, zh: lastAIResult.zh });
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                    showToast('å·²æ”¶è—');
                } else {
                    showToast('å·²ç»æ”¶è—è¿‡äº†');
                }
            }
        }

        function copyAIResult() {
            if (lastAIResult) {
                navigator.clipboard.writeText(lastAIResult.de).then(() => {
                    showToast('å·²å¤åˆ¶å¾·è¯­');
                });
            }
        }

        // ========== Settings ==========
        function loadApiKey() {
            const key = localStorage.getItem('geminiApiKey') || '';
            document.getElementById('apiKeyInput').value = key;
        }

        function saveApiKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            localStorage.setItem('geminiApiKey', key);
            showToast('API Key å·²ä¿å­˜');
        }

        // ========== Utils ==========
        function escapeHtml(str) {
            return str.replace(/'/g, "\\'").replace(/"/g, '\\"');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('visible');
            setTimeout(() => toast.classList.remove('visible'), 2000);
        }

        // Init
        init();
    </script>
</body>
</html>
